sudo: false
language: java
before_script:
    - lein deps
    - yarn install
jobs:
    include:
        - stage: "Drivers"
          if: branch = master
        - stage: "Frontend"
          language: node_js
          script: yarn run test-karma
          script: yarn run test-unit --coverage
          script: ./bin/build-for-test
          script: yarn run test-integrated-no-build

cache:
    directories:
        - node_modules
        - ~/.yarn
        - ~/.yarn-cache
